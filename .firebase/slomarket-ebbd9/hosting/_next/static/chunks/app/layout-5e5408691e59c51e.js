(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3188:function(e,n){"use strict";n.Z="/_next/static/fonts/logo.svg"},3725:function(e,n,t){Promise.resolve().then(t.t.bind(t,8089,23)),Promise.resolve().then(t.bind(t,5959)),Promise.resolve().then(t.bind(t,3575))},148:function(e,n,t){"use strict";t.d(n,{I8:function(){return c},db:function(){return a},tO:function(){return u}});var r=t(994);t(5073);var i=t(4086),o=t(9584),s=t(8153);let l=(0,r.ZF)({apiKey:"AIzaSyBjEHdFQZFsfN-RGa59n16XO7qQ4dhFsAo",authDomain:"slomarket-ebbd9.firebaseapp.com",projectId:"slomarket-ebbd9",storageBucket:"slomarket-ebbd9.appspot.com",messagingSenderId:"247606192779",appId:"1:247606192779:web:421bdc33c388c5c8e828e",measurementId:"G-E3DPKJ6L5V"}),c=(0,s.v0)(l),a=(0,i.ad)(l),u=(0,o.cF)(l)},5959:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return AuthProvider},useAuth:function(){return useAuth}});var r=t(7437),i=t(2265),o=t(148),s=t(8153);let l=(0,i.createContext)();function useAuth(){return(0,i.useContext)(l)}function AuthProvider(e){let{children:n}=e,[t,c]=(0,i.useState)(),[a,u]=(0,i.useState)(!0);async function isAdmin(){return await o.I8.currentUser.getIdTokenResult().then(e=>!!e.claims.admin).catch(e=>{throw e})}return(0,i.useEffect)(()=>{let e=o.I8.onAuthStateChanged(e=>{c(e),u(!1)},e=>{console.error("Authentication error:",e),u(!1)});return e},[]),(0,r.jsx)(l.Provider,{value:{currentUser:t,getUser:function(){return o.I8.currentUser},isLoggedIn:function(){return null!==o.I8.currentUser},isAdmin,login:function(e,n){return o.I8.signInWithEmailAndPassword(e,n)},signOut:function(){return o.I8.signOut()},signUp:function(e,n){return(0,s.Xb)(o.I8,e,n)}},children:!a&&n})}},3575:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return RootLayout}});var r=t(7437),i=t(2022),o=t.n(i),s=t(2265),l=t(3457),c=t(9245),a=t(3226),u=t(8938),h=t(5210),d=t(8874);function Copyright(){return(0,r.jsxs)(a.Z,{variant:"body2",color:"text.secondary",align:"center",children:["Copyright \xa9 ",(0,r.jsx)(h.Z,{color:"inherit",to:"https://slo.market/",children:"SLOMarket"})," ",new Date().getFullYear(),"."]})}function Footer(){return(0,r.jsx)(c.Z,{component:"footer",sx:{py:3,px:2,mt:"auto",backgroundImage:"url(/assets/footer.png)",backgroundSize:"cover",backgroundRepeat:"no-repeat",height:"100%"},children:(0,r.jsx)(u.Z,{maxWidth:"xl",children:(0,r.jsxs)(d.ZP,{container:!0,spacing:3,direction:"column",alignItems:"center",children:[(0,r.jsx)(d.ZP,{item:!0,children:(0,r.jsx)("img",{src:"/_next/static/fonts/footerlogo.svg",alt:"SLOMarket Logo",style:{maxWidth:"100%"}})}),(0,r.jsx)(d.ZP,{item:!0,children:(0,r.jsx)(a.Z,{variant:"h4",align:"center",children:(0,r.jsx)("strong",{children:"Connecting local students and merchants on one platform."})})}),(0,r.jsx)(d.ZP,{item:!0,children:(0,r.jsxs)(l.Z,{mt:2,direction:"row",spacing:6,children:[(0,r.jsx)(h.Z,{to:"#",color:"inherit",children:"About Us"}),(0,r.jsx)(h.Z,{to:"#",color:"inherit",children:"How It Works"}),(0,r.jsx)(h.Z,{to:"#",color:"inherit",children:"Community Guidelines"}),(0,r.jsx)(h.Z,{to:"#",color:"inherit",children:"Support"})]})}),(0,r.jsx)(d.ZP,{item:!0,children:(0,r.jsxs)(l.Z,{mt:2,direction:"row",spacing:6,children:[(0,r.jsx)(h.Z,{to:"#",color:"inherit",children:"Facebook"}),(0,r.jsx)(h.Z,{to:"#",color:"inherit",children:"Twitter"}),(0,r.jsx)(h.Z,{to:"#",color:"inherit",children:"Instagram"})]})}),(0,r.jsx)(d.ZP,{item:!0,children:(0,r.jsx)(c.Z,{mt:5,children:(0,r.jsx)(Copyright,{})})})]})})})}var x=t(4033),g=t(5843),m=t(9975),p=t(8599),f=t(8991);t(148);let j=(0,g.ZP)("div")(e=>{let{theme:n}=e;return{position:"relative",borderRadius:n.shape.borderRadius,color:"white",backgroundColor:(0,m.Fq)(n.palette.common.white,.15),"&:hover":{backgroundColor:(0,m.Fq)(n.palette.common.white,.25)},marginRight:n.spacing(2),marginLeft:0,width:"100%",[n.breakpoints.up("sm")]:{marginLeft:n.spacing(3),width:"auto"}}}),Z=(0,g.ZP)("div")(e=>{let{theme:n}=e;return{padding:n.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}),y=(0,g.ZP)(p.ZP)(e=>{let{theme:n}=e;return{color:"inherit",fontWeight:"bold","& .MuiInputBase-input":{padding:n.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(n.spacing(4),")"),transition:n.transitions.create("width"),width:"100%",[n.breakpoints.up("md")]:{width:"60ch"}}}});var Searchbar=()=>{let[e,n]=(0,s.useState)(""),t=(0,x.useRouter)();return(0,r.jsxs)(j,{children:[(0,r.jsx)(Z,{children:(0,r.jsx)(f.Z,{})}),(0,r.jsx)("form",{onSubmit:n=>{n.preventDefault(),t.push("/search?query=".concat(encodeURIComponent(e)))},children:(0,r.jsx)(y,{placeholder:"Searchâ€¦",inputProps:{"aria-label":"search"},value:e,onChange:e=>{n(e.target.value)}})})]})},b=t(3948),C=t(2310);let v=(0,C.Z)({palette:{type:"light",primary:{main:"#4FB18C",contrastText:"rgba(255,255,255,0.87)"},secondary:{main:"#8ECDB5",contrastText:"#ffffff"},background:{default:"#eeeeee"},error:{main:"#FE5F55"},warning:{main:"#ff9800"},info:{main:"#2196f3"}},typography:{fontFamily:"PT Sans",button:{fontWeight:700}},components:{MuiCssBaseline:{styleOverrides:"\n            @font-face {\n                font-family: 'PT Sans';\n                src: url(".concat("/_next/static/fonts/PTSans-Regular.ttf",") format('truetype');\n                font-weight: normal;\n                font-style: normal;\n            }\n            // ... other styles\n            ")}}});var w=t(2477),I=t(1396),k=t.n(I),P=t(3932),S=t(1417),F=t(3857),L=t(6500),A=t(4989),R=t(9050),E=t(2653),M=t(7292),O=t(7070),W=t(5959),D=t(1116),U=t(3188);function RootLayout(e){let{children:n,title:t}=e,{isLoggedIn:i,getUser:l,signOut:h}=(0,W.useAuth)(),[d,g]=(0,s.useState)(null),[m,p]=(0,s.useState)({open:!1,message:""}),f=(0,x.useRouter)(),j=(0,W.useAuth)(),Z=null!==j.currentUser,handleMenuClose=()=>{g(null)};return(0,r.jsx)(b.Z,{theme:v,children:(0,r.jsx)(F.ZP,{children:(0,r.jsx)("main",{className:o().className,children:(0,r.jsxs)(c.Z,{display:"flex",flexDirection:"column",minHeight:"100vh",children:[(0,r.jsx)(L.Z,{position:"static",children:(0,r.jsx)(u.Z,{maxWidth:"xl",children:(0,r.jsxs)(A.Z,{disableGutters:!0,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(c.Z,{sx:{display:"flex",alignItems:"center"},children:(0,r.jsxs)(k(),{href:"/",style:{display:"flex",alignItems:"center",textDecoration:"none"},children:[(0,r.jsx)("img",{src:U.Z,alt:"Logo",style:{height:"40px",marginRight:"10px"}}),(0,r.jsx)(a.Z,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"flex",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".1rem",color:"white",textDecoration:"none",lineHeight:"inherit"},children:t})]})}),(0,r.jsx)(c.Z,{sx:{flexGrow:1,display:"flex",justifyContent:{md:"center"}},children:(0,r.jsx)(Searchbar,{sx:{width:{xs:"calc(100% - 120px)",sm:"60%",md:"40%"}}})}),(0,r.jsxs)(c.Z,{sx:{flexGrow:0},children:[(0,r.jsx)(R.Z,{variant:"contained",color:"secondary",sx:{mx:2,display:{xs:"none",sm:"inline-flex"},maxWidth:{xs:"100px",sm:"none"}},onClick:()=>{console.log("Context isLoggedIn:",i()),console.log("Firebase isLoggedIn:",Z),Z?f.push("/create-listing"):f.push("/login")},children:(0,r.jsx)("strong",{children:"Create Listing"})}),(0,r.jsxs)(E.Z,{color:"inherit",onClick:e=>{g(e.currentTarget)},sx:{p:{xs:0,sm:1}},children:[(0,r.jsx)(w.Z,{fontSize:"large",sx:{color:"white"}}),(0,r.jsx)(D.Z,{fontSize:"large",sx:{color:"white"}})]})]})]})})}),(0,r.jsx)(P.Z,{anchorEl:d,open:!!d,onClose:handleMenuClose,children:i()?(0,r.jsxs)("div",{children:[(0,r.jsx)(S.Z,{onClick:()=>{handleMenuClose();let e=l().uid;f.push("/profile/".concat(e))},children:"View Profile"}),(0,r.jsx)(S.Z,{onClick:()=>{handleMenuClose(),h(),f.push("/"),p({open:!0,message:"Successfully logged out"})},children:"Log Out"})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)(S.Z,{component:k(),href:"/login",onClick:handleMenuClose,children:"Log In"}),(0,r.jsx)(S.Z,{component:k(),href:"/signup",onClick:handleMenuClose,children:"Sign Up"})]})}),(0,r.jsx)(c.Z,{component:"main",sx:{flexGrow:1},children:n}),(0,r.jsx)(c.Z,{component:"footer",sx:{height:"100vh"},children:(0,r.jsx)(Footer,{})}),(0,r.jsx)(M.Z,{open:m.open,autoHideDuration:6e3,onClose:()=>p({...m,open:!1}),children:(0,r.jsx)(O.Z,{onClose:()=>p({...m,open:!1}),severity:"success",sx:{width:"100%"},children:m.message})})]})})})})}t(994)}},function(e){e.O(0,[358,220,87,880,980,599,214,116,546,162,971,472,744],function(){return e(e.s=3725)}),_N_E=e.O()}]);