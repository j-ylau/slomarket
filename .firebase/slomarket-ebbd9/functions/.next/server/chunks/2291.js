"use strict";exports.id=2291,exports.ids=[2291],exports.modules={96106:(e,t,a)=>{a.d(t,{Ix:()=>uploadImage,Nq:()=>updateUser,PR:()=>getUser,r4:()=>createUser});var r=a(76151),i=a(61522),s=a(31640);async function uploadImage(e,t){if(t.size>5e6)throw Error("Image cannot be more than 5 MB large");if(!/\.(jpeg|jpg|png)$/i.test(t.name))throw Error("Image has an invalid extension. Allowed: jpg, png");let a=`${Math.floor(1e8+9e8*Math.random())}.${t.name.split(".").pop()}`,i=`images/${e}/${a}`,o=(0,s.iH)(r.tO,i);try{await (0,s.KV)(o,t);let e=await (0,s.Jt)(o);return e}catch(e){throw console.error("Error uploading image:",e),e}}async function createUser(e,t){let a=(0,i.JU)(r.db,"users",e),s=(0,i.JU)(r.db,"users",e,"private","contact"),o=(0,i.JU)(r.db,"users",e,"private","favorites");await (0,i.pl)(a,{isAdmin:!1,isStudent:!1,isVerified:!1,name:"",profileImage:"",heroImage:"",contactInfoVisibility:!1}).catch(e=>{throw e}),await (0,i.pl)(s,{email:t,phoneNumber:"",location:""}).catch(e=>{throw e}),await (0,i.pl)(o,{favoriteListings:[],favoriteUsers:[]}).catch(e=>{throw e})}async function getUser(e){let t=(0,i.JU)(r.db,"users",e),a=(0,i.JU)(r.db,"users",e,"private","contact"),s=(0,i.JU)(r.db,"users",e,"private","favorites"),o=null,n=null,c=null;return(await (0,i.QT)(t).then(e=>{e.exists()&&(o=e.data())}).catch(e=>{throw e}),o)?(await (0,i.QT)(a).then(e=>{e.exists()&&(n=e.data())}).catch(()=>{}),await (0,i.QT)(s).then(e=>{e.exists()&&(c=e.data())}).catch(()=>{}),{...o,...n,...c}):null}async function updateUser(e,t){let{email:a,isVerified:s,isAdmin:o,name:n,phoneNumber:c,location:l,profileImage:d,heroImage:u,isStudent:p,contactInfoVisibility:h,favoriteListings:f,favoriteUsers:g}=t,m={isAdmin:o,isStudent:p,isVerified:s,name:n,profileImage:d,heroImage:u,contactInfoVisibility:h},w={email:a,phoneNumber:c,location:l},v={favoriteListings:f,favoriteUsers:g};Object.keys(m).forEach(e=>void 0===m[e]&&delete m[e]),Object.keys(w).forEach(e=>void 0===w[e]&&delete w[e]),Object.keys(v).forEach(e=>void 0===v[e]&&delete v[e]);let U=(0,i.JU)(r.db,"users",e),b=(0,i.JU)(r.db,"users",e,"private","contact"),E=(0,i.JU)(r.db,"users",e,"private","favorites");m&&await (0,i.r7)(U,m),w&&await (0,i.r7)(b,w),v&&await (0,i.r7)(E,v)}},73881:(e,t,a)=>{a.r(t),a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=a(31323);let __WEBPACK_DEFAULT_EXPORT__=e=>{let t=(0,r.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}}};