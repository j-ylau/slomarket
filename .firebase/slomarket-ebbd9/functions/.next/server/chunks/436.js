"use strict";exports.id=436,exports.ids=[436],exports.modules={70436:(e,t,n)=>{n.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var i=n(30784),s=n(9885),o=n(57114),r=n(19390),l=n(72586),a=n(43872),d=n.n(a),c=n(10413),x=n.n(c),h=n(33987),u=n.n(h),p=n(16854),g=n(92133),j=n.n(g),m=n(42454),f=n.n(m),w=n(62969),b=n.n(w),y=n(42153),C=n.n(y),v=n(16856),k=n.n(v),S=n(69547),D=n.n(S),_=n(64832),A=n.n(_),Z=n(81932),E=n.n(Z),L=n(30321),I=n(39223),R=n(8349),z=n(90343),T=n.n(z),U=n(64731),Y=n.n(U),$=n(61522),F=n(48060),M=n.n(F),O=n(76151),P=n(71829),B=n.n(P),W=n(88707),H=n.n(W),N=n(69700),G=n(30237),K=n(48007),X=n(98604),J=n(18282);let __WEBPACK_DEFAULT_EXPORT__=function({loading:e,listingId:t,title:n,createdAt:a,updatedAt:c,description:h,images:g,isFree:m,location:w,price:y,studentVerification:v,priceHistory:S}){let[_,Z]=(0,s.useState)(!1),z=(0,r.Z)(),U=(0,l.Z)(z.breakpoints.down("sm")),[F,P]=(0,s.useState)(null),[W,Q]=(0,s.useState)(!1),[q,V]=(0,s.useState)(""),ee=(0,o.useRouter)(),{isLoggedIn:et,isAdmin:en}=(0,J.useAuth)(),ei=(0,J.useAuth)();console.log(ei.currentUser);let handleSnackbarClose=(e,t)=>{"clickaway"!==t&&Q(!1)},handleCloseMenu=()=>{P(null)},handleDeleteListing=async e=>{if(!en){V("You do not have permission to delete this listing. Contact support if you think this is an issue."),Q(!0);return}try{let t=(0,$.JU)(O.db,"listings",e);await (0,$.oe)(t),V("Listing deleted successfully."),Q(!0)}catch(e){console.error("Error deleting listing: ",e),V("You do not have permission to delete listings. Contact support@slomarket.com if you think this is an issue."),Q(!0)}},es=Array.isArray(g)&&g.length>0?g[0]:"default-image-url",formatDate=e=>{if(!e||!e.seconds)return"Unknown";let t=new Date(1e3*e.seconds),n=Y()(t).format("MM/DD/YYYY");return"Invalid date"!==n?n:"Unknown"};return e?(0,i.jsxs)(d(),{sx:{width:U?"100%":300,minHeight:"420px",borderRadius:"8px",overflow:"hidden",boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.25)",marginBottom:2,flexDirection:"column",display:"flex"},children:[i.jsx(x(),{variant:"rectangular",width:"100%",height:118}),(0,i.jsxs)(d(),{sx:{p:2},children:[i.jsx(x(),{variant:"text",width:"60%"}),i.jsx(x(),{variant:"text"}),i.jsx(x(),{variant:"text"}),i.jsx(x(),{variant:"text",width:"80%"})]}),(0,i.jsxs)(d(),{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[i.jsx(x(),{variant:"text",width:"40%"}),i.jsx(x(),{variant:"circular",width:40,height:40})]})]}):(0,i.jsxs)(d(),{sx:{width:U?"100%":300,height:"460px",borderRadius:"8px",overflow:"hidden",boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.25)",marginBottom:2,flexDirection:"column",display:"flex",backgroundColor:"white"},children:[(0,i.jsxs)(d(),{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white"},children:[i.jsx(M(),{"aria-label":"settings","aria-controls":"long-menu","aria-haspopup":"true",onClick:e=>{P(e.currentTarget)},sx:{margin:"0 8px"},children:i.jsx(N.Z,{})}),(0,i.jsxs)(B(),{id:"long-menu",anchorEl:F,open:!!F,onClose:handleCloseMenu,children:[(0,i.jsxs)(H(),{onClick:()=>{T()(t),V("Listing ID copied to clipboard."),Q(!0),handleCloseMenu()},children:[i.jsx(X.Z,{fontSize:"small",sx:{marginRight:1}})," Copy Listing ID"]}),et&&en&&(0,i.jsxs)(H(),{onClick:()=>handleDeleteListing(t),sx:{color:K.Q6[500]},children:[i.jsx(G.Z,{fontSize:"small",sx:{marginRight:1}})," Delete Listing"]})]})]}),(0,i.jsxs)(d(),{sx:{flexGrow:1,cursor:"pointer"},onClick:()=>{ee.push(`/listing/${t}`)},children:[i.jsx(d(),{sx:{width:"100%",position:"relative",paddingTop:"56.25%"},children:i.jsx("img",{src:es,alt:n,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})}),(0,i.jsxs)(d(),{sx:{p:2,flexGrow:1},style:{backgroundColor:"white"},children:[i.jsx(u(),{variant:"h6",sx:{fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n}),i.jsx(u(),{variant:"subtitle2",color:"textSecondary",sx:{mb:1},children:h}),i.jsx(u(),{variant:"body2",color:"textSecondary",sx:{fontStyle:"italic"},children:`Created: ${formatDate(a)||"Not available"}`}),c&&i.jsx(u(),{variant:"caption",color:"textSecondary"})]}),(0,i.jsxs)(p.default,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{p:2,backgroundColor:"white"},children:[i.jsx(u(),{variant:"h5",sx:{fontWeight:"bold",display:"flex",alignItems:"center"},children:0===y?i.jsx(j(),{icon:i.jsx(R.Z,{}),label:"Free",size:"large"}):`$${Number(y).toFixed(2)}`}),v&&(0,i.jsxs)(f(),{badgeContent:i.jsx(I.Z,{color:"primary"}),sx:{mr:4},anchorOrigin:{vertical:"top",horizontal:"right"},children:[i.jsx(d(),{})," "]})]}),(0,i.jsxs)(d(),{sx:{p:2,display:"flex",alignItems:"center",backgroundColor:"white"},children:[i.jsx(L.Z,{fontSize:"small",color:"primary"}),i.jsx(u(),{variant:"caption",color:"textSecondary",sx:{ml:1},children:w})]})]}),(0,i.jsxs)(b(),{open:_,onClose:()=>{Z(!1)},children:[i.jsx(C(),{children:"Price History"}),i.jsx(k(),{children:i.jsx(D(),{children:Array.isArray(S)?S.map(e=>`${e.price} on ${formatDate(e.date)}`).join("\n"):"No price history available"})})]}),i.jsx(A(),{open:W,autoHideDuration:6e3,onClose:handleSnackbarClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:i.jsx(E(),{onClose:handleSnackbarClose,severity:"success",sx:{width:"100%"},children:q})})]})}}};